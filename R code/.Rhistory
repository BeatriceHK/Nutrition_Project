yr13 <- read.csv("arc13_day_result.csv", header = T, stringsAsFactors = F)
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Per day results across three years -- Ran Zhuo")
yr13 <- read.csv("arc13_day_result.csv", header = T, stringsAsFactors = F)
yr14 <- read.csv("arc14_day_result.csv", header = T, stringsAsFactors = F)
yr15 <- read.csv("nut13_day_result.csv", header = T, stringsAsFactors = F)
yr15 <- read.csv("nut15_day_result.csv", header = T, stringsAsFactors = F)
View(yr15)
View(yr14)
View(yr13)
plot(yr13$HEI2010_TOTAL_SCORE)
plot(yr14$HEI2010_TOTAL_SCORE)
plot(plot(yr15$HEI2010_TOTAL_SCORE))
plot(yr15$HEI2010_TOTAL_SCORE)
View(yr13)
View(yr13)
View(yr13)
plot(yr13$HEI2010_TOTAL_SCORE)
plot(yr14$HEI2010_TOTAL_SCORE)
plot(yr15$HEI2010_TOTAL_SCORE)
View(yr13)
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/from Stacey")
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/per day results - Ran Zhuo")
pday13 <- read.csv("arc13_day_result.csv", header = T, stringsAsFactors = F)
pday14 <- read.csv("arc14_day_result.csv", header = T, stringsAsFactors = F)
pday15 <- read.csv("nut15_day_result.csv", header = T, stringsAsFactors = F)
pday.all <- read.csv("total_perday.csv", header = T, stringsAsFactors = F)
View(pday.all)
attach(pday.all)
reg1 <- lm(HEI2010_TOTAL_SCORE~factor(UserName)+NumFoods+KCAL+factor(year))
summary(reg1)
reg1 <- lm(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+RecallNo)
summary(reg1)
plot(yr13$HEI2010_TOTAL_SCORE)
plot(pday13$HEI2010_TOTAL_SCORE)
plot(pday14$HEI2010_TOTAL_SCORE)
plot(pday15$HEI2010_TOTAL_SCORE)
summary(reg1)
boxplot(HEI2010_TOTAL_SCORE~year, pday.all)
anova(reg1)
influence(reg1)
anova(reg1)
plot(reg1)
par(mfrow(2,2))
par(mfrow=c(2,2))
plot(reg1)
par(mfrow=c(1,1))
plot(reg1)
par(mfrow=c(2,2))
plot(reg1)
par(mfrow=c(1,1))
View(pday.all)
boxplot(HEI2010_TOTAL_SCORE~UserName, pday.all)
library(ggplot2)
ggplot(pday.all, aes(x=HEI2010_TOTAL_SCORE, colour=year)) + geom_density()
ggplot(pday.all, aes(x=HEI2010_TOTAL_SCORE, colour=factor(year)) + geom_density()
ggplot(pday.all, aes(x=year, y=HEI2010_TOTAL_SCORE)) + geom_boxplot()
ggplot(pday.all, aes(x=year, y=HEI2010_TOTAL_SCORE)) + geom_boxplot()
ggplot(pday.all, aes(x=year, y=HEI2010_TOTAL_SCORE, fill=year)) + geom_boxplot()
ggplot(pday.all, aes(x=year, y=HEI2010_TOTAL_SCORE, group=year)) + geom_boxplot()
ggplot(pday.all, aes(x=year, y=HEI2010_TOTAL_SCORE, group=year, color=year)) + geom_boxplot()
ggplot(pday.all, aes(x=year, y=HEI2010_TOTAL_SCORE, group=year, fill=year)) + geom_boxplot()
library(lme4)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName), data = pday.all)
mem
summary(mem)
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName), data = pday.all)
mem2 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName)+(1|RecallNo), data = pday.all)
mem2 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName)+
(1|RecallNo), data = pday.all, REML = FALSE)
anova(mem1, mem2)
mem2 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName)+
RecallNo, data = pday.all, REML = FALSE)
anova(mem1, mem2)
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year), data = pday.all,
REML=FALSE)
anova(mem1, mem)
coef(mem)
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/per day results - Ran Zhuo")
pday13 <- read.csv("arc13_day_result.csv", header = T, stringsAsFactors = F)
pday14 <- read.csv("arc14_day_result.csv", header = T, stringsAsFactors = F)
pday15 <- read.csv("nut15_day_result.csv", header = T, stringsAsFactors = F)
pday.all <- read.csv("total_perday.csv", header = T, stringsAsFactors = F)
attach(pday.all)
View(pday.all)
reg1 <- lm(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+RecallNo, data = pday.all)
summary(reg1)
par(mfrow=c(2,2))
plot(reg1)
par(mfrow=c(1,1))
boxplot(HEI2010_TOTAL_SCORE~year, pday.all)
boxplot(HEI2010_TOTAL_SCORE~UserName, pday.all)
anova(reg1)
library(lme4)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName), data = pday.all)
mem
summary(mem)
View(pday.all)
summary(reg1)
plot(reg1)
par(mfrow=c(2,2))
par(mfrow=c(2,2))
plot(reg1)
par(mfrow=c(1,1))
boxplot(HEI2010_TOTAL_SCORE~year, pday.all)
boxplot(HEI2010_TOTAL_SCORE~UserName, pday.all)
anova(reg1)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName), data = pday.all)
mem
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year), data = pday.all,
REML=FALSE)
anova(mem1, mem)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName)+(1|RecallNo), data = pday.all)
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName), data = pday.all,
REML=FALSE)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName)+(1|RecallNo),
data = pday.all, REML = FALSE)
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName), data = pday.all,
REML=FALSE)
anova(mem1, mem)
mem1 <- lmer(HEI2010_TOTAL_SCORE~1, data = pday.all,
REML=FALSE)
anova(mem1, mem)
mem1 <- lmer(HEI2010_TOTAL_SCORE~1, data = pday.all,
REML=FALSE)
mem1 <- lm(HEI2010_TOTAL_SCORE~1, data = pday.all,
REML=FALSE)
mem1 <- lm(HEI2010_TOTAL_SCORE~1, data = pday.all)
anova(mem1, mem)
Mixed model, bsi as response variable
pday.all <- read.csv("total_perday.csv", header = T, stringsAsFactors = F)
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/per day results - Ran Zhuo")
pday.all <- read.csv("total_perday.csv", header = T, stringsAsFactors = F)
attach(pday.all)
reg1 <- lm(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+RecallNo, data = pday.all)
summary(reg1)
boxplot(HEI2010_TOTAL_SCORE~year, pday.all)
boxplot(HEI2010_TOTAL_SCORE~UserName, pday.all)
anova(reg1)
View(pday.all)
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/per person results - Ran Zhuo")
perperson <- read.csv("total_perperson.csv", header = T, stringsAsFactors = F)
attach(perperson)
View(perperson)
reg1 <- lm(HEI_score~.-UserName)
reg1 <- lm(HEI_score~.-UserName, data=perperson)
summary(reg1)
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/per day results - Ran Zhuo")
perday <- read.csv("total_perday.csv", header = T, stringsAsFactors = F)
library(lme4)
View(perday)
attach(perday)
reg2 <- lm(HEI2010_TOTAL_SCORE~Tot_Veg+GreenAndBean+Tot_Fruit+WholeFruit+WholeGrain+Tot_Dairy+Tot_Protein+SeafoodAndPlantProtein+FattyAcid+Sodium+RefinedGrain+Empty_Calories+year)
summary(reg2)
range(perday)
View(perday)
range(perday[,8:19])
hist(perday$Tot_Veg)
hist(perday$GreenAndBean)
hist(perday$Tot_Fruit)
hist(perday$WholeFruit)
hist(perday$WholeGrain)
hist(perday$Tot_Dairy)
hist(perday$Tot_Protein)
hist(perday$SeafoodAndPlantProtein)
hist(perday$FattyAcid)
hist(perday$Sodium)
hist(perday$RefinedGrain)
hist(perday$Empty_Calories)
library(lme4)
lmer(HEI2010_TOTAL_SCORE ~ 1 + (1 | UserName), data=perday)
lme(HEI2010_TOTAL_SCORE ~ 1, random = ~ 1 | UserName, data=perday)
library(nlme)
lme(HEI2010_TOTAL_SCORE ~ 1, random = ~ 1 | UserName, data=perday)
library(leaps)
reg.full <- regsubsets(HEI2010_TOTAL_SCORE~Tot_Veg+GreenAndBean+Tot_Fruit+WholeFruit+
WholeGrain+Tot_Dairy+Tot_Protein+SeafoodAndPlantProtein+
FattyAcid+Sodium+RefinedGrain+Empty_Calories+year, perday)
summary(reg.full)
lmer(HEI2010_TOTAL_SCORE ~ RecallNo + (RecallNo | UserName), data=perday)
lme(HEI2010_TOTAL_SCORE ~ RecallNo, random = ~ RecallNo | UserName, data=perday)
lme(HEI2010_TOTAL_SCORE~Tot_Veg+GreenAndBean+Tot_Fruit+WholeFruit+
WholeGrain+Tot_Dairy+Tot_Protein+SeafoodAndPlantProtein+
FattyAcid+Sodium+RefinedGrain+Empty_Calories+year,
random = ~ RecallNo | UserName,
correlation = corAR1(),
data=perday)
lme.mod1 <- lmer(HEI2010_TOTAL_SCORE ~ RecallNo + (RecallNo | UserName), data=perday)
summary(lme.mod1)
lme.n <- lmer(HEI2010_TOTAL_SCORE ~ 1 + (1 | UserName), data=perday)
lme.n <- lmer(HEI2010_TOTAL_SCORE ~ 1 + (1 | UserName), data=perday, family=gaussian,
REML = T, verbose = F)
lme.n <- lmer(HEI2010_TOTAL_SCORE ~ 1 + (1 | UserName), data=perday,
REML = T, verbose = F)
summary(lme.n)
lme.1 <- lmer(HEI2010_TOTAL_SCORE ~Tot_Veg+GreenAndBean+Tot_Fruit+WholeFruit+
WholeGrain+Tot_Dairy+Tot_Protein+SeafoodAndPlantProtein+
FattyAcid+Sodium+RefinedGrain+Empty_Calories+year + (RecallNo | UserName),
data=perday,
REML = T, verbose = F)
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/per day results - Ran Zhuo")
pday.all <- read.csv("total_perday.csv", header = T, stringsAsFactors = F)
attach(pday.all)
attach(pday.all)
source('C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/R code/Nutrition_Project.R', echo=TRUE)
getwd()
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/R code")
library(lme4)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName),
data = pday.all, REML = FALSE)
mem
summary(mem)
mem1 <- lmer(HEI2010_TOTAL_SCORE~1,
data = pday.all, REML=FALSE)
mem1 <- lmer(HEI2010_TOTAL_SCORE~1+(1|UserName),
data = pday.all, REML=FALSE)
anova(mem1, mem)
coef(mem)
perperson <- read.csv("total_perperson.csv", header = T, stringsAsFactors = F)
source('C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/R code/Nutrition_Project.R', echo=TRUE)
1.96*.4/10
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/per person results - Ran Zhuo")
perperson <- read.csv("total_perperson.csv", header = T, stringsAsFactors = F)
attach(perperson)
reg1 <- lm(HEI_score~.-UserName, data=perperson)
summary(reg1)
reg2 <- lm(HEI2010_TOTAL_SCORE~Tot_Veg+GreenAndBean+Tot_Fruit+WholeFruit+
WholeGrain+Tot_Dairy+Tot_Protein+SeafoodAndPlantProtein+
FattyAcid+Sodium+RefinedGrain+Empty_Calories+year)
setwd("C:/Users/Peng/Google Drive/Projects/4. Nutrition Project (opened on 2.1.16)/Data/per day results - Ran Zhuo")
perday <- read.csv("total_perday.csv", header = T, stringsAsFactors = F)
attach(perday)
reg2 <- lm(HEI2010_TOTAL_SCORE~Tot_Veg+GreenAndBean+Tot_Fruit+WholeFruit+
WholeGrain+Tot_Dairy+Tot_Protein+SeafoodAndPlantProtein+
FattyAcid+Sodium+RefinedGrain+Empty_Calories+year)
summary(reg2)
cor(perday)
View(perday)
cor(perday[,-c(1:4)])
plot(reg1)
library(ggplot2)
View(perday)
qplot(factor(year), HEI2010_TOTAL_SCORE, data = perday, geom = "boxplot")
p <- ggplot(perday, aes(factor(year), HEI2010_TOTAL_SCORE))
p+geom_boxplot(aes(factor(year)))
p+geom_boxplot(aes(fill=factor(year)))
p <- ggplot(perday, aes(factor(UserName), HEI2010_TOTAL_SCORE))
p+geom_boxplot(aes(fill=factor(UserName)))
View(perday)
View(perperson)
t.test(HEI2010_TOTAL_SCORE[year=="2013"], HEI2010_TOTAL_SCORE[year=="2014"])
t.test(HEI2010_TOTAL_SCORE[year=="2013"], HEI2010_TOTAL_SCORE[year=="2015"])
t.test(HEI2010_TOTAL_SCORE[year=="2014"], HEI2010_TOTAL_SCORE[year=="2015"])
reg1 <- lm(HEI2010_TOTAL_SCORE~year, data = perday)
anova(reg1)
t.test(HEI2010_TOTAL_SCORE[year=="2013"], HEI2010_TOTAL_SCORE[year=="2014"])
t.test(HEI2010_TOTAL_SCORE[year=="2013"], HEI2010_TOTAL_SCORE[year=="2015"])
anova(reg1)
t.test(HEI2010_TOTAL_SCORE[year=="2013"], HEI2010_TOTAL_SCORE[year=="2014"])
t.test(HEI2010_TOTAL_SCORE[year=="2013"], HEI2010_TOTAL_SCORE[year=="2015"])
t.test(HEI2010_TOTAL_SCORE[year=="2014"], HEI2010_TOTAL_SCORE[year=="2015"])
reg2 <- lm(HEI2010_TOTAL_SCORE~UserName+year)
anova(reg2)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName),
data = perday, REML = FALSE)
mem
summary(mem)
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+(1|UserName),
data = perday, REML=FALSE)
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+(1|UserName),
data = perday, REML = FALSE)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName),
data = perday, REML = FALSE)
library(lme4)
mem <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+(1|UserName),
data = perday, REML = FALSE)
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+(1|UserName),
data = perday, REML = FALSE)
anova(mem1, mem)
mem1 <- lmer(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year),
data = perday, REML = FALSE)
anova(reg2)
reg1 <- lm(HEI2010_TOTAL_SCORE~NumFoods+KCAL+factor(year)+RecallNo, data = perday)
summary(reg1)
